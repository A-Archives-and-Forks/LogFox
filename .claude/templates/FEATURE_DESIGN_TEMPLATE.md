# <FEATURE> Design

## Metadata
- Feature slug: <FEATURE>
- Source task: <copy user request>
- Planner session: <session id or n/a>
- Last updated: <YYYY-MM-DD>

## 1. Problem statement
<What is being solved and why now?>

## 2. Scope boundaries
### In scope
- <item>

### Out of scope
- <item>

## 3. Current architecture context
### Modules and layers touched
| Module/Layer | Role today | Expected change |
| --- | --- | --- |
| <module> | <role> | <change> |

### Existing constraints to preserve
- <constraint>

## 4. Proposed solution design
### High-level design
<Describe the target approach>

### Stage-to-component mapping
| Stage | Component/module | Intended change |
| --- | --- | --- |
| <stage> | <component> | <change> |

## 5. Data, state, and control flow
### Data flow
<Input -> transform -> output>

### State flow
<State/events/reducers or equivalent>

### Control flow and side effects
<Navigation, IO, async boundaries>

## 6. Architecture constraints (verifier-critical)
- [C1] <Non-negotiable architecture or boundary constraint>
- [C2] <Non-negotiable architecture or boundary constraint>

## 7. Acceptance criteria mapping
| Constraint ID | Acceptance criteria | Verification method | Stage |
| --- | --- | --- | --- |
| C1 | <criteria> | <test/review/check> | <stage> |

## 8. Risks and mitigations
| Risk | Impact | Mitigation |
| --- | --- | --- |
| <risk> | <impact> | <mitigation> |

## 9. Rollback plan
<How to safely roll back this feature if needed>

## 10. Open questions and assumptions
- <question or assumption>

## 11. Remediation history
- None.
